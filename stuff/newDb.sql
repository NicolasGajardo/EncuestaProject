-- MySQL Script generated by MySQL Workbench
-- Sat Jun 10 10:14:53 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`ENCUESTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ENCUESTA` (
  `ID_ENCUESTA` INT NOT NULL AUTO_INCREMENT,
  `IP_DISPOSITIVO` VARCHAR(15) NULL,
  `TIPO` VARCHAR(45) NULL,
  `HORA_ACTIVA` TIMESTAMP NULL,
  `HORA_DESACTIVA` TIMESTAMP NULL,
  PRIMARY KEY (`ID_ENCUESTA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PREGUNTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PREGUNTA` (
  `ID_PREGUNTA` INT NOT NULL AUTO_INCREMENT,
  `TIPO_PREGUNTA` VARCHAR(1) NULL,
  `PREGUNTA` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_PREGUNTA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`USUARIO` (
  `ID_USUARIO` INT NOT NULL AUTO_INCREMENT,
  `COD_TARJETA` VARCHAR(45) NULL,
  `SEXO` VARCHAR(1) NULL,
  `COD_ASOC1` VARCHAR(45) NULL,
  `COD_ASOC2` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_USUARIO`),
  UNIQUE INDEX `COD_ASOC1_UNIQUE` (`COD_ASOC1` ASC),
  UNIQUE INDEX `COD_ASOC2_UNIQUE` (`COD_ASOC2` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DETALLE_ENCUESTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DETALLE_ENCUESTA` (
  `ID_DETALLE` INT NOT NULL,
  `RESPUESTA` VARCHAR(45) NULL,
  `HORA_INICIO` TIMESTAMP NULL,
  `HORA_FIN` TIMESTAMP NULL,
  `DETALLE_ENCUESTAcol` VARCHAR(45) NULL,
  `PREGUNTA_ID_PREGUNTA` INT NOT NULL,
  `ENCUESTA_ID_ENCUESTA` INT NOT NULL,
  `USUARIO_ID_USUARIO` INT NOT NULL,
  PRIMARY KEY (`ID_DETALLE`),
  INDEX `fk_DETALLE_ENCUESTA_PREGUNTA_idx` (`PREGUNTA_ID_PREGUNTA` ASC),
  INDEX `fk_DETALLE_ENCUESTA_ENCUESTA1_idx` (`ENCUESTA_ID_ENCUESTA` ASC),
  INDEX `fk_DETALLE_ENCUESTA_USUARIO1_idx` (`USUARIO_ID_USUARIO` ASC),
  CONSTRAINT `fk_DETALLE_ENCUESTA_PREGUNTA`
    FOREIGN KEY (`PREGUNTA_ID_PREGUNTA`)
    REFERENCES `mydb`.`PREGUNTA` (`ID_PREGUNTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DETALLE_ENCUESTA_ENCUESTA1`
    FOREIGN KEY (`ENCUESTA_ID_ENCUESTA`)
    REFERENCES `mydb`.`ENCUESTA` (`ID_ENCUESTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DETALLE_ENCUESTA_USUARIO1`
    FOREIGN KEY (`USUARIO_ID_USUARIO`)
    REFERENCES `mydb`.`USUARIO` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
